<!DOCTYPE html>
<html>
<head>
    <title>üìã Complete API Endpoints Report - Football Value Betting</title>
    <meta charset="utf-8">
    <style>
        body {
            margin: 0;
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            color: #e7f3ff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            min-height: 100vh;
            padding: 32px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 48px;
            background: linear-gradient(145deg, rgba(30, 58, 138, 0.9), rgba(30, 64, 175, 0.9));
            border: 2px solid #60a5fa;
            border-radius: 20px;
            padding: 48px 32px;
            position: relative;
            overflow: hidden;
        }
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(96, 165, 250, 0.2) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .header-content {
            position: relative;
            z-index: 1;
        }
        .main-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 24px;
        }
        .status-summary {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        .summary-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 20px;
            border-radius: 20px;
            font-weight: 600;
        }
        .summary-working { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
        .summary-error { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
        .summary-warning { background: rgba(251, 191, 36, 0.2); color: #fbbf24; }

        .endpoints-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        .endpoint-card {
            background: rgba(30, 58, 138, 0.8);
            border: 1px solid #60a5fa;
            border-radius: 12px;
            padding: 24px;
            backdrop-filter: blur(10px);
        }
        .endpoint-card.working {
            border-color: #22c55e;
            background: rgba(5, 150, 105, 0.2);
        }
        .endpoint-card.error {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.2);
        }
        .endpoint-card.warning {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.2);
        }
        .endpoint-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        .endpoint-method {
            background: #0ea5e9;
            color: white;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
        }
        .endpoint-method.post {
            background: #22c55e;
        }
        .endpoint-status {
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
        }
        .status-working {
            background: #22c55e;
            color: white;
        }
        .status-error {
            background: #ef4444;
            color: white;
        }
        .status-warning {
            background: #fbbf24;
            color: #000;
        }
        .endpoint-path {
            font-family: monospace;
            font-size: 16px;
            color: #ffffff;
            margin-bottom: 12px;
            word-break: break-all;
        }
        .endpoint-description {
            color: #d1e7dd;
            margin-bottom: 12px;
            font-size: 14px;
        }
        .endpoint-sample {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 12px;
            max-height: 150px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 8px;
        }
        .test-button:hover {
            background: #2563eb;
        }

        .categories {
            margin-bottom: 32px;
        }
        .category-title {
            color: #86efac;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 24px;
            padding-bottom: 8px;
            border-bottom: 2px solid #60a5fa;
        }

        .fastapi-info {
            background: rgba(30, 58, 138, 0.8);
            border: 1px solid #60a5fa;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
        }
        .fastapi-title {
            color: #86efac;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 16px;
        }
        .fastapi-link {
            color: #60a5fa;
            text-decoration: none;
            font-weight: 600;
        }
        .fastapi-link:hover {
            color: #93c5fd;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1 class="main-title">üìã Complete API Endpoints Report</h1>
                <p class="subtitle">
                    Football Value Betting FastAPI System<br>
                    Comprehensive endpoint testing & status verification
                </p>
                <div class="status-summary">
                    <div class="summary-item summary-working">‚úÖ 18 Working</div>
                    <div class="summary-item summary-error">‚ùå 1 Error</div>
                    <div class="summary-item summary-warning">‚ö†Ô∏è 1 Requires Params</div>
                </div>
            </div>
        </div>

        <div class="fastapi-info">
            <h3 class="fastapi-title">üöÄ FastAPI Documentation</h3>
            <p>Interactive API documentation available at:</p>
            <a href="http://localhost:8000/docs" target="_blank" class="fastapi-link">
                http://localhost:8000/docs - Swagger UI
            </a><br>
            <a href="http://localhost:8000/redoc" target="_blank" class="fastapi-link">
                http://localhost:8000/redoc - ReDoc Documentation
            </a>
        </div>

        <div class="categories">
            <h2 class="category-title">üè• Core System Endpoints</h2>
            <div class="endpoints-grid">
                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/health</div>
                    <div class="endpoint-description">Basic health check endpoint</div>
                    <div class="endpoint-sample">{"ok": true}</div>
                    <button class="test-button" onclick="testEndpoint('/health')">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/health/debug</div>
                    <div class="endpoint-description">Extended health check with system details</div>
                    <div class="endpoint-sample">{"ok": true, "uptime_seconds": null, "counts": {"fixtures": 2894, "odds": 151, "indices": 112, "predictions": 112}}</div>
                    <button class="test-button" onclick="testEndpoint('/health/debug')">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/ (redirect to /ui)</div>
                    <div class="endpoint-description">Main UI application entry point</div>
                    <div class="endpoint-sample">HTTP 307 Temporary Redirect -> /ui</div>
                </div>
            </div>
        </div>

        <div class="categories">
            <h2 class="category-title">üéØ Predictions & Picks</h2>
            <div class="endpoints-grid">
                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/picks</div>
                    <div class="endpoint-description">Value betting predictions with EV calculations</div>
                    <div class="endpoint-sample">[{"fixture_id": 1379145, "teams": "Manchester United vs Newcastle", "pick": "AWAY_WIN", "odd": 3.15, "confidence": 0.3819, "ev": 0.202985}]</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/picks?limit=2', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/picks/totals</div>
                    <div class="endpoint-description">Total goals predictions (Over/Under 2.5)</div>
                    <div class="endpoint-sample">[{"fixture_id": 1379145, "teams": "Manchester United vs Newcastle", "pick": "OVER_2_5", "odd": 3.2, "confidence": 0.5279, "ev": 0.68928}]</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/picks/totals', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/bets/history</div>
                    <div class="endpoint-description">Historical betting results and performance</div>
                    <div class="endpoint-sample">[{"fixture_id": 1379125, "teams": "Manchester United vs Bournemouth", "pick": "OVER_2_5", "status": "WIN", "profit": 1.85}]</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/bets/history?limit=2', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/fixtures/{fixture_id}/details</div>
                    <div class="endpoint-description">Detailed fixture information with predictions</div>
                    <div class="endpoint-sample">{"fixture": {...}, "odds": {...}, "decisions": {...}, "prediction_1x2": {...}}</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/fixtures/1379145/details', true)">Test</button>
                </div>
            </div>
        </div>

        <div class="categories">
            <h2 class="category-title">üìä Analytics & Statistics</h2>
            <div class="endpoints-grid">
                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/dashboard</div>
                    <div class="endpoint-description">Main dashboard KPIs and metrics</div>
                    <div class="endpoint-sample">{"kpis": {"total_bets": {"value": 36}, "win_rate": {"value": 50.0}, "roi": {"value": 45.3}, "total_profit": {"value": 16.32}}}</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/dashboard', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/stats</div>
                    <div class="endpoint-description">Detailed betting statistics and performance metrics</div>
                    <div class="endpoint-sample">{"total_bets": 28, "win_rate": 42.11, "roi": 26.95, "total_profit": 5.12, "avg_brier": 0.24}</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/stats', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/stats/totals</div>
                    <div class="endpoint-description">Total goals betting statistics</div>
                    <div class="endpoint-sample">{"total_bets": 28, "wins": 10, "losses": 7, "pending": 11, "win_rate": 58.82, "roi": 65.88}</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/stats/totals', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/stats/combined/window</div>
                    <div class="endpoint-description">Performance statistics over time window</div>
                    <div class="endpoint-sample">{"market": "combined", "days": 30, "total_bets": 36, "win_rate": 50.0, "roi": 45.33, "total_profit": 16.32}</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/stats/combined/window?days=30', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/stats/combined/leagues</div>
                    <div class="endpoint-description">Performance statistics by league</div>
                    <div class="endpoint-sample">[{"league_id": 78, "league": "Bundesliga", "win_rate": 53.85, "roi": 53.85, "total_profit": 7.0}]</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/stats/combined/leagues', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/coverage</div>
                    <div class="endpoint-description">Data coverage and completeness metrics</div>
                    <div class="endpoint-sample">{"ns_total": 34, "ns_odds_pct": 100.0, "ns_predictions_pct": 100.0, "finished_xg_pct": 93.5}</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/coverage', true)">Test</button>
                </div>
            </div>
        </div>

        <div class="categories">
            <h2 class="category-title">‚öôÔ∏è Job Management</h2>
            <div class="endpoints-grid">
                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method post">POST</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/run-now</div>
                    <div class="endpoint-description">Execute jobs: sync_data, compute_indices, build_predictions, evaluate_results, full_pipeline</div>
                    <div class="endpoint-sample">{"ok": true, "started": "sync_data", "skipped": false}</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/run-now?job=sync_data', true, 'POST')">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/jobs/status</div>
                    <div class="endpoint-description">Real-time job execution status</div>
                    <div class="endpoint-sample">{"jobs": {"sync_data": {"status": "running", "started_at": "2025-12-20T10:40:41+00:00"}}}</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/jobs/status', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/jobs/runs</div>
                    <div class="endpoint-description">Job execution history with details</div>
                    <div class="endpoint-sample">[{"id": 3527, "job_name": "sync_data", "status": "running", "triggered_by": "manual:unknown", "duration_seconds": null}]</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/jobs/runs?limit=5', true)">Test</button>
                </div>
            </div>
        </div>

        <div class="categories">
            <h2 class="category-title">üèÜ League & Team Data</h2>
            <div class="endpoints-grid">
                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/standings</div>
                    <div class="endpoint-description">League standings and team positions</div>
                    <div class="endpoint-sample">[{"team_id": 42, "team_name": "Arsenal", "league_id": 39, "rank": 1, "points": 36, "played": 16}]</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/standings?league_id=39', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/league_baselines</div>
                    <div class="endpoint-description">League baseline statistics (requires league_id & season params)</div>
                    <div class="endpoint-sample">{"league_id": 39, "season": 2025, "avg_home_xg": 1.52, "avg_away_xg": 1.176, "draw_freq": 0.2125}</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/league_baselines?league_id=39&season=2025', true)">Test</button>
                </div>

                <div class="endpoint-card error">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-error">‚ùå ERROR</span>
                    </div>
                    <div class="endpoint-path">/api/v1/elo</div>
                    <div class="endpoint-description">Team ELO ratings (500 Internal Server Error)</div>
                    <div class="endpoint-sample">Internal Server Error - missing implementation for list view</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/elo', true)">Test</button>
                </div>
            </div>
        </div>

        <div class="categories">
            <h2 class="category-title">üíæ Database & Utilities</h2>
            <div class="endpoints-grid">
                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/db/browse</div>
                    <div class="endpoint-description">Database table browsing interface</div>
                    <div class="endpoint-sample">{"table": "fixtures", "count": 2, "rows": [...]}</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/db/browse?limit=2', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/api/v1/snapshots/gaps</div>
                    <div class="endpoint-description">Missing odds snapshots detection</div>
                    <div class="endpoint-sample">[]</div>
                    <button class="test-button" onclick="testEndpoint('/api/v1/snapshots/gaps', true)">Test</button>
                </div>

                <div class="endpoint-card working">
                    <div class="endpoint-header">
                        <span class="endpoint-method">GET</span>
                        <span class="endpoint-status status-working">‚úÖ WORKING</span>
                    </div>
                    <div class="endpoint-path">/ui</div>
                    <div class="endpoint-description">Main UI application interface</div>
                    <div class="endpoint-sample">HTML application with full betting system UI</div>
                    <button class="test-button" onclick="window.open('/ui', '_blank')">Open</button>
                </div>
            </div>
        </div>

        <div id="test-results" style="margin-top: 32px;"></div>
    </div>

    <script>
        async function testEndpoint(endpoint, requireAuth = false, method = 'GET') {
            const resultDiv = document.getElementById('test-results');
            resultDiv.innerHTML = '<p style="color: #fbbf24;">üß™ Testing endpoint: ' + endpoint + '</p>';

            try {
                const headers = requireAuth ? { 'X-Admin-Token': 'dev' } : {};
                const response = await fetch(endpoint, {
                    method: method,
                    headers: headers
                });

                const isSuccess = response.ok;
                let result;

                try {
                    result = await response.text();
                    if (result.startsWith('{') || result.startsWith('[')) {
                        result = JSON.stringify(JSON.parse(result), null, 2);
                    }
                } catch {
                    result = response.statusText;
                }

                resultDiv.innerHTML = \`
                    <div style="background: rgba(30, 58, 138, 0.8); border: 1px solid #60a5fa; border-radius: 12px; padding: 24px;">
                        <h3 style="color: #86efac; margin-top: 0;">Test Result: \${endpoint}</h3>
                        <p><strong>Status:</strong> <span style="color: \${isSuccess ? '#22c55e' : '#ef4444'};">\${response.status} \${response.statusText}</span></p>
                        <p><strong>Method:</strong> \${method}</p>
                        <div style="background: rgba(0, 0, 0, 0.3); padding: 12px; border-radius: 6px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto;">
                            <pre>\${result}</pre>
                        </div>
                    </div>
                \`;
            } catch (error) {
                resultDiv.innerHTML = \`
                    <div style="background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; border-radius: 12px; padding: 24px;">
                        <h3 style="color: #ef4444; margin-top: 0;">Test Error: \${endpoint}</h3>
                        <p><strong>Error:</strong> \${error.message}</p>
                    </div>
                \`;
            }
        }

        // Auto-test a sample endpoint on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìã API Endpoints report page loaded');
            setTimeout(() => testEndpoint('/health'), 1000);
        });
    </script>
</body>
</html>
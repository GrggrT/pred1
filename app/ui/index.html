<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Football Value Betting ‚Äî Admin</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600;700;800&family=Onest:wght@400;500;600;700&display=swap&subset=cyrillic" rel="stylesheet">
  <link rel="stylesheet" href="/ui/ui.css">
</head>
<body>
  <!-- Authentication check -->
  <div id="auth-container" class="auth-container">
    <div class="auth-card">
      <h1 class="auth-title">Football Value Betting</h1>
      <p class="mb-lg">–ê–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å: –ª–∞–π–≤, –∏—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫, –æ–ø–µ—Ä–∞—Ü–∏–∏, –¥–∞–Ω–Ω—ã–µ.</p>

      <div class="form-group">
        <label class="form-label">Admin token</label>
        <input type="password" id="admin-token" class="form-input" placeholder="required">
      </div>

      <button type="button" class="btn" data-action="auth-submit">
        –í–æ–π—Ç–∏
      </button>
      <div id="auth-error" class="alert alert-danger mt-3 is-hidden"></div>
    </div>
  </div>

  <!-- Main application (hidden initially) -->
  <div id="main-app" class="app-shell is-hidden">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <div class="brand-title">Football Value Betting</div>
        <div class="brand-sub">–ê–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å: –ª–∞–π–≤, –∏—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫, –æ–ø–µ—Ä–∞—Ü–∏–∏, –¥–∞–Ω–Ω—ã–µ.</div>
      </div>

      <nav class="nav">
        <div class="nav-group">
          <div class="nav-group-title">–ù–∞–≤–∏–≥–∞—Ü–∏—è</div>

          <a href="#dashboard" class="nav-item" data-section="dashboard">
            <div class="nav-left">
              <div class="nav-icon">üè†</div>
              <span>Dashboard</span>
            </div>
            <div class="nav-badge">Overview</div>
          </a>

          <a href="#info" class="nav-item" data-section="info">
            <div class="nav-left">
              <div class="nav-icon">üßæ</div>
              <span>Info</span>
            </div>
            <div class="nav-badge">Full</div>
          </a>

          <a href="#system" class="nav-item" data-section="system">
            <div class="nav-left">
              <div class="nav-icon">‚öôÔ∏è</div>
              <span>–°–∏—Å—Ç–µ–º–∞</span>
            </div>
            <div class="nav-badge">Admin</div>
          </a>
        </div>
      </nav>
    </aside>

    <!-- Main content -->
    <div class="main-content">
      <header class="header">
        <button type="button" class="mobile-toggle" data-action="toggle-sidebar">‚ò∞</button>
        <div>
          <h1 class="header-title" id="page-title">Dashboard</h1>
          <p class="header-subtitle" id="page-subtitle">–ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑ —Å—Ç–∞–≤–æ–∫</p>
          <p class="header-meta" id="page-meta"></p>
        </div>
        <div class="header-actions">
          <span id="connection-status" class="nav-badge">‚Äî</span>
          <button type="button" class="btn-secondary btn-sm" data-action="logout">–í—ã–π—Ç–∏</button>
        </div>
      </header>

      <main class="content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
          <!-- KPI Cards Grid -->
          <div class="dashboard-grid">
            <div class="card">
              <h3 class="card-title">üí∞ –ü—Ä–∏–±—ã–ª—å</h3>
              <div class="kpi-value text-success" id="total-profit">‚Ç¨0.00</div>
              <div class="kpi-label">–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å</div>
            </div>

            <div class="card">
              <h3 class="card-title">üìà ROI</h3>
              <div class="kpi-value" id="roi">0%</div>
              <div class="kpi-label">–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</div>
            </div>

            <div class="card">
              <h3 class="card-title">‚öñÔ∏è Profit Factor</h3>
              <div class="kpi-value" id="profit-factor">‚Äî</div>
              <div class="kpi-label" id="profit-factor-note">–†–∏—Å–∫-–º–µ—Ç—Ä–∏–∫–∞</div>
            </div>

            <div class="card">
              <h3 class="card-title">üéØ –°—Ç–∞–≤–∫–∏</h3>
              <div class="kpi-value" id="total-bets">0</div>
              <div class="kpi-label">–í—Å–µ–≥–æ —Ä–∞–∑–º–µ—â–µ–Ω–æ</div>
            </div>

            <div class="card">
              <h3 class="card-title">‚è±Ô∏è –ü–µ—Ä–∏–æ–¥</h3>
              <div class="kpi-value" id="period-days">0</div>
              <div class="kpi-label">–¥–Ω–µ–π —Ç–æ—Ä–≥–æ–≤–ª–∏</div>
            </div>
          </div>

          <!-- Content Grid -->
          <div class="row mt-3">
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <div class="header-left">
                    <h3 class="card-title mb-0">üî¥ Live Picks</h3>
                    <div id="data-freshness" class="small text-muted">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ‚Äî</div>
                  </div>
                  <div class="btn-group">
                    <button type="button" class="btn-secondary btn-sm" data-action="refresh-live">üîÑ</button>
                    <button type="button" class="btn-success btn-sm" data-action="run-job" data-job="full" title="–ü–æ–ª–Ω—ã–π –∞–ø–¥–µ–π—Ç: sync_data ‚Üí compute_indices ‚Üí build_predictions ‚Üí evaluate_results">üì° –û–±–Ω–æ–≤–∏—Ç—å</button>
                  </div>
                </div>
                <div id="live-picks" class="live-picks">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title mb-0">üìã –ù–µ–¥–∞–≤–Ω–∏–µ —Å—Ç–∞–≤–∫–∏</h3>
                  <select id="stats-period" class="form-select select-compact">
                    <option value="7">7 –¥–Ω–µ–π</option>
                    <option value="30" selected>30 –¥–Ω–µ–π</option>
                    <option value="90">90 –¥–Ω–µ–π</option>
                  </select>
                </div>
                <div id="recent-bets" class="recent-activity">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div id="bets-history-controls" class="mt-3"></div>
                <div id="bets-history-panel" class="mt-3 is-hidden"></div>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-12">
              <div class="card">
                <div class="card-header">
                  <div class="header-left">
                    <h3 class="card-title mb-0">üß™ Quality Report</h3>
                    <div id="quality-report-meta" class="small text-muted">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ‚Äî</div>
                  </div>
                  <div class="btn-group">
                    <button type="button" class="btn-secondary btn-sm" data-action="refresh-quality">üîÑ</button>
                    <button type="button" class="btn-secondary btn-sm" data-action="refresh-quality" data-refresh="1" title="–ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å–µ–π—á–∞—Å">‚ôªÔ∏è</button>
                  </div>
                </div>
                <div id="quality-report" class="p-3">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="small text-muted p-3">
                  –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (JOB_QUALITY_REPORT_CRON, 2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å).
                  –ö–Ω–æ–ø–∫–∞ ‚ôªÔ∏è –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç –æ—Ç—á—ë—Ç –∏ –æ–±–Ω–æ–≤–∏—Ç –∫—ç—à.
                  CLV —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É pre‚Äëkickoff snapshot –±—É–∫–º–µ–∫–µ—Ä–∞ (Bet365).
                  –°–∏–≥–Ω–∞–ª—ã: n&lt;50 (–º–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö), CLV coverage &lt;30% (warning), CLV &lt; 0 (risk), Brier&gt;0.27/LogLoss&gt;0.75 –ø—Ä–∏ n>=100.
                </div>
              </div>
            </div>
          </div>

        </section>

        <!-- Info Section -->
        <section id="info" class="section">
          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-header">
                  <div class="header-left">
                    <h3 class="card-title mb-0">üßæ Info‚Äë–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏</h3>
                    <div id="info-meta" class="small text-muted">–û–∫–Ω–æ: ‚Äî</div>
                  </div>
                  <div class="btn-group">
                    <button type="button" class="btn-secondary btn-sm" data-action="refresh-info">üîÑ</button>
                  </div>
                </div>
                <div class="live-filters info-filters">
                  <div class="row">
                    <div class="col-md-3">
                      <label class="form-label">–î–∞—Ç–∞ –æ—Ç</label>
                      <input type="date" id="info-date-from" class="form-input">
                    </div>
                    <div class="col-md-3">
                      <label class="form-label">–î–∞—Ç–∞ –¥–æ</label>
                      <input type="date" id="info-date-to" class="form-input">
                    </div>
                    <div class="col-md-3">
                      <label class="form-label">–õ–∏–º–∏—Ç –º–∞—Ç—á–µ–π</label>
                      <select id="info-limit" class="form-select">
                        <option value="40">40</option>
                        <option value="80" selected>80</option>
                        <option value="150">150</option>
                        <option value="300">300</option>
                        <option value="500">500</option>
                      </select>
                    </div>
                    <div class="col-md-3">
                      <label class="form-label">Search (league/teams)</label>
                      <input id="info-search" class="form-input" placeholder="e.g. Premier / Arsenal">
                    </div>
                  </div>
                  <div class="info-filter-actions">
                    <label class="info-checkbox">
                      <input type="checkbox" id="info-only-upcoming">
                      –¢–æ–ª—å–∫–æ upcoming (NS)
                    </label>
                    <div class="btn-group">
                      <button type="button" class="btn-secondary btn-sm" data-action="info-apply">Apply</button>
                      <button type="button" class="btn-secondary btn-sm" data-action="info-reset">Reset</button>
                    </div>
                  </div>
                </div>
                <div class="info-tabs">
                  <button type="button" class="btn-secondary btn-sm info-tab is-active" data-action="info-tab" data-tab="picks">Picks</button>
                  <button type="button" class="btn-secondary btn-sm info-tab" data-action="info-tab" data-tab="stats">Stats</button>
                </div>
                <div id="info-picks-panel" class="info-panel">
                  <div id="info-picks" class="live-picks">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
                <div id="info-stats-panel" class="info-panel is-hidden">
                  <div id="info-stats" class="p-3">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                  <div class="small text-muted p-3">
                    ROI@2.0 ‚Äî —É—Å–ª–æ–≤–Ω—ã–π ROI –ø—Ä–∏ —Ä–∞–≤–Ω—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞—Ö (bolvan–∫–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è), logloss ‚Äî –ø–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏—è.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- System Section -->
        <section id="system" class="section">
          <div class="row">
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title mb-0">üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è–º–∏</h3>
                  <button type="button" class="btn-secondary btn-sm" data-action="refresh-jobs">üîÑ</button>
                </div>
                <div id="jobs-content" class="jobs-content">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞–Ω–∏–π...</div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title mb-0">üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</h3>
                  <button type="button" class="btn-secondary btn-sm" data-action="refresh-db">üîÑ</button>
                </div>
                <div id="database-content" class="database-content">–ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...</div>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-12">
              <div class="card">
                <div class="card-header">
                  <div class="header-left">
                    <h3 class="card-title mb-0">üß† Model Status</h3>
                    <div id="model-updated" class="small text-muted">‚Äî</div>
                  </div>
                  <div class="btn-group">
                    <button type="button" class="btn-secondary btn-sm" data-action="refresh-model">üîÑ</button>
                    <button type="button" class="btn-success btn-sm" data-action="run-job" data-job="maintenance" title="DB-only refresh league params (draw/rho/alpha)">üßπ Refresh params</button>
                    <button type="button" class="btn-danger btn-sm" data-action="run-job" data-job="rebuild_elo" title="Force full Elo rebuild from DB fixtures">üß† Rebuild Elo</button>
                  </div>
                </div>
                <div id="model-content" class="model-content">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Fixture details modal -->
  <div id="fixture-modal" class="modal-overlay is-hidden" role="dialog" aria-modal="true" aria-labelledby="fixture-modal-title">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="fixture-modal-title">Match</div>
        <button type="button" class="btn-secondary btn-sm" data-action="close-fixture-modal" aria-label="Close">‚úï</button>
      </div>
      <div id="fixture-modal-body" class="modal-body">
        <p class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
      </div>
    </div>
  </div>

  <script src="/ui/ui.js" defer></script>
</body>
</html>
